(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{64094:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/invited-attendee/technical-check",function(){return t(23803)}])},61783:function(e,n,t){"use strict";t.d(n,{N:function(){return c},O:function(){return a}});var r=t(85893),i=t(67294),o=t(34929),c=(0,i.createContext)(null),a=function(e){var n=e.children,t=(0,i.useState)(""),a=t[0],u=t[1],s=(0,i.useState)(null),l=s[0],f=s[1],d=(0,i.useState)(null),v=d[0],h=d[1],m=(0,i.useCallback)((function(e){try{var n=new o.SyncClient(e);window.syncClient=n,u(e),f(n)}catch(t){throw new Error(t)}}),[]);return(0,i.useEffect)((function(){l&&l.stream("OnDemandStream").then((function(e){h(e)}))}),[l]),(0,r.jsx)(c.Provider,{value:{syncToken:a,connect:m,syncClient:l,onDemandStream:v},children:n})}},855:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(67294),i=t(48847),o=t(1438),c=t(34155);function a(){var e,n=(0,r.useState)(o.DF),t=n[0],a=(n[1],{bandwidthProfile:{video:{mode:t.bandwidthProfileMode,dominantSpeakerPriority:t.dominantSpeakerPriority,trackSwitchOffMode:t.trackSwitchOffMode,contentPreferencesMode:t.contentPreferencesMode,clientTrackSwitchOffControl:t.clientTrackSwitchOffControl}},dominantSpeaker:!0,networkQuality:{local:1,remote:1},maxAudioBitrate:Number(t.maxAudioBitrate),preferredVideoCodecs:[{codec:"VP8",simulcast:"peer-to-peer"!==t.roomType&&"go"!==t.roomType}],environment:c.env.REACT_APP_TWILIO_ENVIRONMENT});return i.tq&&(null===a||void 0===a||null===(e=a.bandwidthProfile)||void 0===e?void 0:e.video)&&(a.bandwidthProfile.video.maxSubscriptionBitrate=25e5),"dev"===c.env.REACT_APP_TWILIO_ENVIRONMENT&&(a.wsServer="wss://us2.vss.dev.twilio.com/signaling"),(0,i.po)(a)}},30708:function(e,n,t){"use strict";var r=t(85893);n.Z=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){var t=e.children;return n.reduceRight((function(e,n){return(0,r.jsx)(n,{children:e})}),t)}}},69623:function(e,n,t){"use strict";var r=t(85893),i=t(11163),o=t(67294),c=t(51582),a=t(8225),u=t(61783),s=t(50784),l=t(855),f=t(15428),d=(0,t(30708).Z)((function(e){var n=(0,c.R)(),t=n.visit,a=n.user,u=(0,f.Z)(),s=u.getAudioAndVideoTracks,l=u.localTracks,d=(0,o.useState)(),v=d[0],h=d[1];return(0,o.useEffect)((function(){v||s().catch((function(e){console.log("Error acquiring local media:"),console.dir(e),h(e),i.default.push("/patient/video/no-av-permission")}))}),[s,v]),t&&a&&l&&l.length>1&&(0,r.jsx)(r.Fragment,{children:e.children})}),a.a,u.O);n.Z=function(e){var n=(0,l.Z)();return(0,r.jsx)(c.KX,{children:(0,r.jsx)(s.Z,{options:n,onError:function(e){return console.log(e)},children:(0,r.jsx)(d,{children:e.children})})})}},73870:function(e,n,t){"use strict";t.d(n,{c:function(){return h}});var r=t(85893),i=t(67294),o=t(53352),c=t(15428),a=t(97811),u=t(23074),s=t(5909),l=t(1438),f=t(45067);function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var v=function(e){var n=e.containerClass,t=(0,c.Z)().localTracks,o=t.find((function(e){return"audio"===e.kind})),a=t.find((function(e){return"video"===e.kind})),v=(0,s.Z)(a),h=(0,i.useState)(!1),m=h[0],p=h[1],y=(0,i.useState)(!1),x=y[0],g=y[1],j=(0,i.useState)(!1),k=j[0],w=j[1],b=(0,f.Z)().videoInputDevices,S=(0,i.useCallback)((function(){var e="user"===(null===v||void 0===v?void 0:v.getSettings().facingMode)?"environment":"user";null===a||void 0===a||a.restart(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){d(e,n,t[n])}))}return e}({},l.lA,{facingMode:e}))}),[v,a]);return(0,i.useEffect)((function(){(null===v||void 0===v?void 0:v.getSettings().facingMode)&&!1===k&&w(!0)}),[v,k]),(0,i.useEffect)((function(){a&&(x?a.disable():a.enable())}),[x]),(0,i.useEffect)((function(){o&&(m?o.disable():o.enable())}),[m]),(0,r.jsxs)("div",{className:n,children:[k&&b.length>1&&(0,r.jsx)(u.z,{className:"my-2",icon:"flip_camera_ios",iconType:"outline",variant:u.W.tertiary,onClick:S}),(0,r.jsx)(u.z,{className:"my-2",icon:x?"videocam_off":"videocam",iconType:"outline",variant:u.W.tertiary,onClick:function(){return g(!x)}}),(0,r.jsx)(u.z,{className:"my-2",icon:m?"mic_off":"mic",iconType:"outline",variant:u.W.tertiary,onClick:function(){return p(!m)}})]})},h=function(e){var n=e.videoImage,t=(0,c.Z)().localTracks,i=t.find((function(e){return"audio"===e.kind})),u=t.find((function(e){return"video"===e.kind}));return(0,r.jsxs)("div",{className:"flex mt-4 mb-1",children:[(0,r.jsx)(v,{containerClass:"flex flex-col justify-center px-1"}),(0,r.jsx)("div",{className:"flex-grow px-1",style:{width:"187px",height:"250px"},children:u?(0,r.jsx)(o.Z,{track:u,isLocal:!0}):(0,r.jsx)("img",{src:n,alt:"Video"})}),i&&(0,r.jsx)(a.Z,{track:i})]})}},23803:function(e,n,t){"use strict";t.r(n);var r=t(85893),i=t(67294),o=t(23074),c=t(9783),a=t(75270),u=t(73870),s=t(69623),l=t(36539),f=t(11163),d=t(15428),v=t(51582),h=(new Date,"Dr. Josefina Santos"),m=function(){var e=(0,v.R)(),n=e.visit,t=e.user,s=(0,d.Z)().getAudioAndVideoTracks,m=(0,i.useState)(),p=m[0],y=m[1],x=(0,f.useRouter)();return(0,i.useEffect)((function(){p||s().catch((function(e){console.log("Error acquiring local media:"),console.dir(e),y(e)}))}),[s,p]),(0,i.useEffect)((function(){if(t&&n){var e=setInterval((function(){return l.G.checkRoom(t,n.roomName).then((function(e){e.roomAvailable&&x.push("/patient/video/")}))}),5e3);return function(){return clearInterval(e)}}}),[x,n,t]),(0,r.jsx)(a.Ar,{children:(0,r.jsxs)("div",{className:"my-4 flex flex-col items-center justify-center",children:[(0,r.jsx)(c.X,{children:"Invited to Appointment"}),(0,r.jsx)("div",{className:"mb-2 text-secondary",children:h}),(0,r.jsx)(u.c,{videoImage:"/invited-attendee.svg"}),(0,r.jsx)(o.z,{className:"my-2 px-8",children:"Continue to Visit"}),(0,r.jsx)("div",{className:"flex items-center justify-center bg-secondary text-white text-2xl h-[200px] w-full m-2",children:"Content Area"})]})})};m.Layout=s.Z,n.default=m},36539:function(e,n,t){"use strict";t.d(n,{G:function(){return s}});var r=t(35666),i=t.n(r),o=t(43820);function c(e,n,t,r,i,o,c){try{var a=e[o](c),u=a.value}catch(s){return void t(s)}a.done?n(u):Promise.resolve(u).then(r,i)}function a(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){c(o,r,i,a,u,"next",e)}function u(e){c(o,r,i,a,u,"throw",e)}a(void 0)}))}}function u(){return(u=a(i().mark((function e(n,t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(o.X.get(o.X.visits.recording),{method:"POST",body:JSON.stringify({room_sid:t,action:r}),headers:{authorization:"Bearer ".concat(n.token),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var s={checkRoom:function(e,n){return fetch(o.X.get(o.X.visits.patientRoomToken),{method:"POST",body:JSON.stringify({room_name:n}),headers:{authorization:"Bearer ".concat(e.token),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}))},createRoom:function(e,n){return fetch(o.X.get(o.X.visits.providerRoomToken),{method:"POST",body:JSON.stringify({room_name:n}),headers:{authorization:"Bearer ".concat(e.token),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}))},toggleRecording:function(e,n,t){return u.apply(this,arguments)}}}},function(e){e.O(0,[816,221,389,313,283,337,270,774,888,179],(function(){return n=64094,e(e.s=n);var n}));var n=e.O();_N_E=n}]);