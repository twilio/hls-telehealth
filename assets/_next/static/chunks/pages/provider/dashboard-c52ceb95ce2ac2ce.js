(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12],{3670:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/provider/dashboard",function(){return n(81872)}])},855:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(67294),o=n(48847),i=n(1438),a=n(34155);function c(){var e,t=(0,r.useState)(i.DF),n=t[0],c=(t[1],{bandwidthProfile:{video:{mode:n.bandwidthProfileMode,dominantSpeakerPriority:n.dominantSpeakerPriority,trackSwitchOffMode:n.trackSwitchOffMode,contentPreferencesMode:n.contentPreferencesMode,clientTrackSwitchOffControl:n.clientTrackSwitchOffControl}},dominantSpeaker:!0,networkQuality:{local:1,remote:1},maxAudioBitrate:Number(n.maxAudioBitrate),preferredVideoCodecs:[{codec:"VP8",simulcast:"peer-to-peer"!==n.roomType&&"go"!==n.roomType}],environment:a.env.REACT_APP_TWILIO_ENVIRONMENT});return o.tq&&(null===c||void 0===c||null===(e=c.bandwidthProfile)||void 0===e?void 0:e.video)&&(c.bandwidthProfile.video.maxSubscriptionBitrate=25e5),"dev"===a.env.REACT_APP_TWILIO_ENVIRONMENT&&(c.wsServer="wss://us2.vss.dev.twilio.com/signaling"),(0,o.po)(c)}},31368:function(e,t,n){"use strict";var r=n(85893),o=n(67294),i=n(50784),a=n(855),c=n(51582),s=n(15428),u=n(8225);function d(e){var t=(0,c.R)().user,n=(0,s.Z)(),i=n.getAudioAndVideoTracks,a=n.localTracks,u=(0,o.useState)(),d=u[0],p=u[1];return(0,o.useEffect)((function(){d||i().catch((function(e){console.log("Error acquiring local media:"),console.dir(e),p(e)}))}),[i,d]),t&&a&&a.length>0&&(0,r.jsx)(r.Fragment,{children:e.children})}t.Z=function(e){var t=(0,a.Z)();return(0,r.jsx)(c.KX,{children:(0,r.jsx)(i.Z,{options:t,onError:function(e){return console.log(e)},children:(0,r.jsx)(d,{children:(0,r.jsx)(u.a,{children:e.children})})})})}},81872:function(e,t,n){"use strict";n.r(t);var r=n(85893),o=n(67294),i=n(15428),a=n(16232),c=n(55484),s=n(31368),u=n(1107),d=n(51582),p=function(){var e=(0,i.Z)().getAudioAndVideoTracks,t=(0,o.useState)(),n=t[0],s=t[1],p=(0,o.useState)(),l=p[0],f=p[1],h=(0,o.useState)([]),m=h[0],v=h[1],_=(0,o.useState)(),y=_[0],g=_[1],P=(0,o.useState)([]),b=P[0],j=P[1],w=(0,d.R)().user;return(0,o.useEffect)((function(){n||e().catch((function(e){console.dir(e),s(e)}))}),[e,n]),(0,o.useEffect)((function(){u.Z.fetchAllTelehealthVisits(w).then((function(e){v(e),f(e[0]),console.log("NEXT VISIT IS",l)})),u.Z.fetchAllContent(w).then((function(e){j(e),g(e.find((function(e){e.provider_ids.some((function(e){return e===w.id}))})))}))}),[w]),(0,r.jsx)(a.Ar,{children:(0,r.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1",children:[(0,r.jsxs)("div",{children:[l&&(0,r.jsx)(c.r,{className:"my-2",visitNext:l}),(0,r.jsx)(a.Lb,{})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(a.bR,{className:"my-2",visitQueue:m}),(0,r.jsx)(a.B2,{className:"my-2",contentAssigned:y,contentAvailable:b})]}),(0,r.jsx)("div",{className:"order-first lg:order-last",children:(0,r.jsx)(a.xs,{})})]})})};p.Layout=s.Z,t.default=p},1107:function(e,t,n){"use strict";var r=n(35666),o=n.n(r),i=n(43820);function a(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,s,"next",e)}function s(e){a(i,r,o,c,s,"throw",e)}c(void 0)}))}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function d(e){e.patient_medications.map((function(e){return{medication:e}}));return u({id:e.patient_id,name:e.patient_name,family_name:e.patient_family_name,given_name:e.patient_given_name,phone:e.patient_phone},e.patient_email&&{email:e.patient_email},{gender:e.patient_gender},e.patient_language&&{language:e.patient_language},{medications:e.patient_medications,conditions:e.patient_conditions})}function p(e){return{id:e.provider_id,name:e.provider_name,phone:e.provider_phone,on_call:new Boolean(e.provider_on_call)}}function l(e){return u({id:e.appointment_id,type:e.appointment_type,start_datetime_ltz:new Date(e.appointment_start_datetime_utc),end_datetime_ltz:new Date(e.appointment_end_datetime_utc)},e.appointment_reason&&{reason:e.appointment_reason},{references:e.appointment_references,patient_id:e.patient_id,provider_id:e.provider_id})}function f(e){return u({id:e.content_id,title:e.content_title},e.content_description&&{description:e.content_description},{video_url:e.content_video_url,provider_ids:e.providers.map((function(e){return e}))})}function h(){return(h=c(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"provider"!==t.role&&Promise.reject({error:"Only provider can get patient queue"}),e.next=3,fetch(i.X.backendRoot+"/datastore/appointments",{method:"POST",body:JSON.stringify({action:"GETTUPLE",provider_id:t.id}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)}}).then((function(e){return e.json()}));case 3:return n=e.sent,r=[],n.forEach((function(e){var t=d(e.patient),n=p(e.provider),o=l(e.appointment),i={id:o.id,roomName:o.id,ehrAppointment:o,ehrPatient:t,ehrProvider:n};r.push(i),console.log(i)})),e.abrupt("return",Promise.resolve(r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=c(o().mark((function e(t,n){var r,a,c,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i.X.backendRoot+"/datastore/appointments",{method:"POST",body:JSON.stringify({action:"GETTUPLE",appointment_id:n}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)}}).then((function(e){return e.json()}));case 2:return 0===(r=e.sent).length&&Promise.reject({error:"not found appointment: ".concat(n)}),a=d(r[0].patient),c=p(r[0].provider),s=l(r[0].appointment),u={id:s.id,roomName:s.id,ehrAppointment:s,ehrPatient:a,ehrProvider:c},e.abrupt("return",Promise.resolve(u));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=c(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i.X.backendRoot+"/datastore/contents",{method:"POST",body:JSON.stringify({action:"GET"}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)}}).then((function(e){return e.json()}));case 2:return n=e.sent,r=[],n.forEach((function(e){var t=f(n[0]);r.push(t)})),e.abrupt("return",Promise.resolve(r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=c(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i.X.backendRoot+"/datastore/contents",{method:"POST",body:JSON.stringify({action:"GET",provider_id:t.id}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)}}).then((function(e){return e.json()}));case 2:return 0===(n=e.sent).length&&Promise.reject({error:"not found any content"}),r=f(n[0]),e.abrupt("return",Promise.resolve(r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.Z={fetchAllTelehealthVisits:function(e){return h.apply(this,arguments)},fetchTelehealthVisitForPatient:function(e,t){return m.apply(this,arguments)},fetchAllContent:function(e){return v.apply(this,arguments)},fetchContentForProvider:function(e){return _.apply(this,arguments)}}}},function(e){e.O(0,[774,816,221,132,946,363,421,867,888,179],(function(){return t=3670,e(e.s=t);var t}));var t=e.O();_N_E=t}]);