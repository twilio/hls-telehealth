(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[994],{4234:function(o,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/provider/video",function(){return n(37)}])},37:function(o,t,n){"use strict";n.r(t);var e=n(5893),i=n(7294),r=n(5428),c=n(4942),a=n(1582),u=n(1163),s=n(602),f=n(4291),p=n(1502),h=n(1438),v=function(){var o=(0,a.R)(),t=o.user,n=(o.visit,(0,r.Z)()),f=n.connect,v=n.room,d=(0,u.useRouter)();return(0,i.useEffect)((function(){v||p.Z.getFromStorage(h.bo).then((function(o){s.G.createRoom(t,o).then((function(o){o.roomAvailable||d.push("/provider/dashboard"),f(o.token)}))}))}),[d,v]),(0,e.jsx)(c.ls,{})};v.Layout=f.ZP,t.default=v},602:function(o,t,n){"use strict";n.d(t,{G:function(){return i}});var e={backendRoot:"http://localhost:3001",token:{get:"/visit/token",validate:"/token/validate"},visits:{list:"/visits",get:"/visits/{id}",patientRoomToken:"/visit/room",providerRoomToken:"/visit/provider-room"},get:function(o){return"".concat(e.backendRoot).concat(o)}};var i={checkRoom:function(o,t){return console.log("checkRoom: ",t),fetch(e.get(e.visits.patientRoomToken),{method:"POST",body:JSON.stringify({room_name:t}),headers:{authorization:"Bearer ".concat(o.token),Accept:"application/json","Content-Type":"application/json"}}).then((function(o){return o.json()})).then((function(o){return o}))},createRoom:function(o,t){return fetch(e.get(e.visits.providerRoomToken),{method:"POST",body:JSON.stringify({room_name:t}),headers:{authorization:"Bearer ".concat(o.token),Accept:"application/json","Content-Type":"application/json"}}).then((function(o){return o.json()})).then((function(o){return o}))}}}},function(o){o.O(0,[316,756,651,942,774,888,179],(function(){return t=4234,o(o.s=t);var t}));var t=o.O();_N_E=t}]);