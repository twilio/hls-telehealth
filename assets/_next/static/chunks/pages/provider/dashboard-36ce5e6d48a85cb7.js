(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12],{3670:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/provider/dashboard",function(){return t(28067)}])},61783:function(e,n,t){"use strict";t.d(n,{N:function(){return c},O:function(){return o}});var r=t(85893),i=t(67294),s=t(34929),c=(0,i.createContext)(null),o=function(e){var n=e.children,t=(0,i.useState)(""),o=t[0],a=t[1],u=(0,i.useState)(null),d=u[0],l=u[1],f=(0,i.useState)(null),h=f[0],v=f[1],m=(0,i.useCallback)((function(e){try{var n=new s.SyncClient(e);window.syncClient=n,a(e),l(n)}catch(t){throw new Error(t)}}),[]);return(0,i.useEffect)((function(){d&&d.stream("OnDemandStream").then((function(e){v(e)}))}),[d]),(0,r.jsx)(c.Provider,{value:{syncToken:o,connect:m,syncClient:d,onDemandStream:h},children:n})}},36255:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(67294),i=t(61783);function s(){var e=(0,r.useContext)(i.N);if(!e)throw new Error("useSyncContext must be used within SyncProvider");return e}},855:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(67294),i=t(48847),s=t(1438),c=t(34155);function o(){var e,n=(0,r.useState)(s.DF),t=n[0],o=(n[1],{bandwidthProfile:{video:{mode:t.bandwidthProfileMode,dominantSpeakerPriority:t.dominantSpeakerPriority,trackSwitchOffMode:t.trackSwitchOffMode,contentPreferencesMode:t.contentPreferencesMode,clientTrackSwitchOffControl:t.clientTrackSwitchOffControl}},dominantSpeaker:!0,networkQuality:{local:1,remote:1},maxAudioBitrate:Number(t.maxAudioBitrate),preferredVideoCodecs:[{codec:"VP8",simulcast:"peer-to-peer"!==t.roomType&&"go"!==t.roomType}],environment:c.env.REACT_APP_TWILIO_ENVIRONMENT});return i.tq&&(null===o||void 0===o||null===(e=o.bandwidthProfile)||void 0===e?void 0:e.video)&&(o.bandwidthProfile.video.maxSubscriptionBitrate=25e5),"dev"===c.env.REACT_APP_TWILIO_ENVIRONMENT&&(o.wsServer="wss://us2.vss.dev.twilio.com/signaling"),(0,i.po)(o)}},30708:function(e,n,t){"use strict";var r=t(85893);n.Z=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){var t=e.children;return n.reduceRight((function(e,n){return(0,r.jsx)(n,{children:e})}),t)}}},31368:function(e,n,t){"use strict";var r=t(85893),i=t(67294),s=t(50784),c=t(855),o=t(51582),a=t(15428),u=t(8225),d=t(30708),l=t(61783),f=(0,d.Z)((function(e){var n=(0,o.R)().user,t=(0,a.Z)(),s=t.getAudioAndVideoTracks,c=t.localTracks,u=(0,i.useState)(),d=u[0],l=u[1];return(0,i.useEffect)((function(){d||s().catch((function(e){console.log("Error acquiring local media:"),console.dir(e),l(e)}))}),[s,d]),n&&c&&c.length>1&&(0,r.jsx)(r.Fragment,{children:e.children})}),u.a,l.O);n.Z=function(e){var n=(0,c.Z)();return(0,r.jsx)(o.KX,{children:(0,r.jsx)(s.Z,{options:n,onError:function(e){return console.log(e)},children:(0,r.jsx)(f,{children:e.children})})})}},28067:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var r=t(35666),i=t.n(r),s=t(85893),c=t(67294),o=t(15428),a=t(83172),u=t(55484),d=t(31368),l=t(1107),f=t(51582),h=t(36255),v=t(43820),m=t(48357),p=t(39716),x=t(31237),w=t(28836);function S(e,n,t,r,i,s,c){try{var o=e[s](c),a=o.value}catch(u){return void t(u)}o.done?n(a):Promise.resolve(a).then(r,i)}var y=function(e){var n=e.className,t=(0,c.useState)([]),r=t[0],o=t[1],a=(0,c.useState)(0),u=a[0],d=a[1],h=(0,c.useState)(0),v=h[0],y=h[1],N=(0,c.useState)([]),j=N[0],g=N[1],k=(0,f.R)().user;return(0,c.useEffect)((function(){var e;(e=i().mark((function e(){var n,t,r,s,c,a,u,f,h,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=27;break}return e.next=3,l.Z.getSurveys(k.token);case 3:for(n=e.sent,o(n),t=0,r=0,s=new Set,c=!0,a=!1,u=void 0,e.prev=8,f=n[Symbol.iterator]();!(c=(h=f.next()).done);c=!0)(v=h.value).selectedIssues.map((function(e){s.add(e)})),"thumb_up"===v.selectedThumb?t++:r++;e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),a=!0,u=e.t0;case 16:e.prev=16,e.prev=17,c||null==f.return||f.return();case 19:if(e.prev=19,!a){e.next=22;break}throw u;case 22:return e.finish(19);case 23:return e.finish(16);case 24:g(Array.from(s)),d(t),y(r);case 27:case"end":return e.stop()}}),e,null,[[8,12,16,24],[17,,19,23]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function c(e){S(s,r,i,c,o,"next",e)}function o(e){S(s,r,i,c,o,"throw",e)}c(void 0)}))})()}),[k]),(0,s.jsxs)(m.Z,{className:n,children:[(0,s.jsx)(w.f,{children:"Video Quality Surveys"}),(0,s.jsx)("div",{className:"",children:r.length&&void 0!==r?(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)("div",{className:"justify-items-center grid gap-2 grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{className:"text-primary mt-2",name:"thumb_up",outline:!0}),(0,s.jsx)("p",{className:"font-bold",children:u||0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{className:"text-primary mt-2",name:"thumb_down",outline:!0}),(0,s.jsx)("p",{className:"mx-2 font-bold",children:v||0})]})]}),j&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-primary text-lg",children:"Issues:"}),j.map((function(e,n){return(0,s.jsxs)("p",{className:"text-sm",children:["\u2022 ",e]},n)}))]})]}):(0,s.jsx)(x.Z,{})})]})};function N(e,n,t,r,i,s,c){try{var o=e[s](c),a=o.value}catch(u){return void t(u)}o.done?n(a):Promise.resolve(a).then(r,i)}function j(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function c(e){N(s,r,i,c,o,"next",e)}function o(e){N(s,r,i,c,o,"throw",e)}c(void 0)}))}}var g=function(){var e=(0,o.Z)().getAudioAndVideoTracks,n=(0,c.useState)(),t=n[0],r=n[1],d=(0,c.useState)(null),m=d[0],p=d[1],x=(0,c.useState)([]),w=x[0],S=x[1],N=(0,c.useState)([]),g=N[0],k=N[1],b=(0,c.useState)(),P=b[0],A=b[1],E=(0,c.useState)([]),_=E[0],T=E[1],C=(0,c.useState)(!1),Z=C[0],O=C[1],I=(0,f.R)().user,V=(0,h.Z)(),R=V.connect,M=V.syncClient,L=V.onDemandStream,D=(0,c.useCallback)(j(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.Z.fetchAllTelehealthVisits(I).then(j(i().mark((function e(n){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.filter((function(e,n,t){return"WALKIN"===e.ehrAppointment.type&&n===t.findIndex((function(n){return n.ehrPatient.phone===e.ehrPatient.phone}))})),r=n.filter((function(e){return"WALKIN"!==e.ehrAppointment.type})),k(t),S(r),p(t.length?t[0]:r[0]);case 5:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)}))),[I]);return(0,c.useEffect)((function(){fetch(v.X.get(v.X.visits.token),{method:"POST",body:JSON.stringify({action:"SYNC"}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(j(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:t=e.sent,R(t.token);case 4:case"end":return e.stop()}}),e)}))))}),[R]),(0,c.useEffect)((function(){t||e().catch((function(e){console.dir(e),r(e)}))}),[e,t]),(0,c.useEffect)((function(){D(),l.Z.fetchAllContent(I).then((function(e){T(e),A(e.find((function(e){e.provider_ids.some((function(e){return e===I.id}))})))}))}),[D,I]),(0,c.useEffect)((function(){var e=j(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&(console.log("message received",n),n.message.data.patientSyncToken&&O(!0),D());case 1:case"end":return e.stop()}}),e)})));if(M&&L)return L.on("messagePublished",e),function(){L.off("messagePublished",e)}}),[D,L,M,I]),(0,s.jsx)(a.Ar,{children:(0,s.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(u.r,{className:"my-2",visitNext:m}),(0,s.jsx)(a.Lb,{})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(a.bR,{className:"my-2",onDemandQueue:g,visitQueue:w,isNewVisit:Z,setIsNewVisit:O}),(0,s.jsx)(a.B2,{className:"my-2",contentAssigned:P,contentAvailable:_}),(0,s.jsx)(y,{className:"my-2"})]}),(0,s.jsx)("div",{className:"order-first lg:order-last",children:(0,s.jsx)(a.xs,{})})]})})};g.Layout=d.Z;var k=g}},function(e){e.O(0,[816,221,132,389,313,17,416,337,107,225,774,888,179],(function(){return n=3670,e(e.s=n);var n}));var n=e.O();_N_E=n}]);