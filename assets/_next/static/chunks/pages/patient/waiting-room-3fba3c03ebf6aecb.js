(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[515],{6281:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/patient/waiting-room",function(){return n(8112)}])},8478:function(e,t,n){"use strict";n.d(t,{c:function(){return c}});var i=n(5893),r=(n(7294),n(4709)),o=n(5428),a=n(6419),c=function(e){var t=e.videoImage,n=(0,o.Z)().localTracks.find((function(e){return e.name.includes("camera")}));return(0,i.jsxs)("div",{className:"flex mt-4 mb-1",children:[(0,i.jsxs)("div",{className:"flex flex-col justify-center px-1",children:[(0,i.jsx)(a.z,{className:"my-2",icon:"flip_camera_ios",iconType:"outline",variant:a.W.tertiary}),(0,i.jsx)(a.z,{className:"my-2",icon:"videocam",iconType:"outline",variant:a.W.tertiary}),(0,i.jsx)(a.z,{className:"my-2",icon:"mic",iconType:"outline",variant:a.W.tertiary})]}),(0,i.jsx)("div",{className:"flex-grow px-1",children:n?(0,i.jsx)(r.Z,{track:n,isLocal:!0}):(0,i.jsx)("img",{src:t,alt:"Video",width:187,height:250})})]})}},8112:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var i=n(5893),r=n(7294),o=n(6419),a=n(9716),c=function(e){var t=e.name;return(0,i.jsx)(a.J,{className:"mr-2 text-tertiary",name:t})},s=function(e){var t=e.date;return(0,i.jsxs)("div",{className:"flex border border-light rounded-lg text-secondary",children:[(0,i.jsxs)("div",{className:"flex flex-grow p-2 border-r border-light",children:[(0,i.jsx)(c,{name:"calendar_today"})," ",t.toLocaleString("default",{month:"short",day:"numeric",year:"numeric"})]}),(0,i.jsxs)("div",{className:"flex flex-grow p-2",children:[(0,i.jsx)(c,{name:"schedule"})," ",t.toLocaleString("default",{hour:"numeric",minute:"numeric",hour12:!0})]})]})},l=n(9783),u=n(1117),d=n(9891),m=n(8478),f=n(1582),h=n(5428),x=n(4291),v=n(602),p=n(1163),j=function(){var e=(0,r.useState)(!1),t=e[0],n=e[1],a=(0,f.R)(),c=a.visit,x=a.user,j=(0,h.Z)().getAudioAndVideoTracks,y=(0,r.useState)(),g=y[0],N=y[1],k=(0,p.useRouter)();return(0,r.useEffect)((function(){g||j().catch((function(e){console.log("Error acquiring local media:"),console.dir(e),N(e)}))}),[j,g]),(0,r.useEffect)((function(){if(x&&c){var e=setInterval((function(){return v.G.checkRoom(x,c.roomName).then((function(e){e.roomAvailable&&k.push("/patient/video/")}))}),5e3);return function(){return clearInterval(e)}}}),[k,c,x]),(0,i.jsxs)(u.Ar,{children:[c?(0,i.jsxs)("div",{className:"my-4 flex flex-col items-center justify-center",children:[(0,i.jsx)(l.X,{children:"Your Appointment"}),(0,i.jsx)("div",{className:"mb-2 text-secondary",children:c.providerName}),(0,i.jsx)(s,{date:c.visitDateTime}),(0,i.jsx)(m.c,{videoImage:"/patient.jpg"}),(0,i.jsx)("div",{className:"text-tertiary",children:"Your visit will start when the provider joins"}),(0,i.jsx)("div",{className:"flex items-center justify-center bg-secondary text-white text-2xl h-[200px] w-full m-2",children:"Content Area"}),(0,i.jsx)(o.z,{className:"mt-2 px-8",variant:o.W.secondary,outline:!0,onClick:function(){return n(!0)},children:"Leave Waiting Room"})]}):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)(d.u,{isVisible:t,children:(0,i.jsxs)("div",{className:"flex flex-col text-center p-4",children:[(0,i.jsx)("p",{className:"mb-4 text-primary",children:"Are you sure you want to leave the waiting room? Your visit will start shortly."}),(0,i.jsx)(o.z,{className:"mt-2 px-8",onClick:function(){return n(!1)},children:"Stay in Waiting Room"}),(0,i.jsx)(o.z,{as:"a",href:"/patient/video",className:"mt-2 px-8",variant:o.W.secondary,outline:!0,children:"Leave Waiting Room"})]})})]})};j.Layout=x.ZP;var y=j},602:function(e,t,n){"use strict";n.d(t,{G:function(){return r}});var i={backendRoot:"http://localhost:3001",token:{get:"/visit/token",validate:"/token/validate"},visits:{list:"/visits",get:"/visits/{id}",patientRoomToken:"/visit/room",providerRoomToken:"/visit/provider-room"},get:function(e){return"".concat(i.backendRoot).concat(e)}};var r={checkRoom:function(e,t){return console.log("checkRoom: ",t),fetch(i.get(i.visits.patientRoomToken),{method:"POST",body:JSON.stringify({room_name:t}),headers:{authorization:"Bearer ".concat(e.token),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}))},createRoom:function(e,t){return fetch(i.get(i.visits.providerRoomToken),{method:"POST",body:JSON.stringify({room_name:t}),headers:{authorization:"Bearer ".concat(e.token),Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}))}}},1163:function(e,t,n){e.exports=n(387)}},function(e){e.O(0,[316,283,651,117,774,888,179],(function(){return t=6281,e(e.s=t);var t}));var t=e.O();_N_E=t}]);