(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{2616:function(t,o,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/patient/video",function(){return n(7712)}])},7712:function(t,o,n){"use strict";n.r(o);var e=n(5893),i=n(7294),r=n(5428),c=n(1117),a=n(1582),u=n(602),s=n(4291),f=n(1163),p=function(){var t=(0,a.R)(),o=t.user,n=t.visit,s=(0,r.Z)(),p=s.connect,h=s.room,v=(0,f.useRouter)();return(0,i.useEffect)((function(){h||u.G.checkRoom(o,n.roomName).then((function(t){t.roomAvailable||v.push("/patient/waiting-room"),p(t.token)}))}),[v,h]),(0,e.jsx)(c.ls,{})};p.Layout=s.ZP,o.default=p},602:function(t,o,n){"use strict";n.d(o,{G:function(){return i}});var e={backendRoot:"http://localhost:3001",token:{get:"/visit/token",validate:"/token/validate"},visits:{list:"/visits",get:"/visits/{id}",patientRoomToken:"/visit/room",providerRoomToken:"/visit/provider-room"},get:function(t){return"".concat(e.backendRoot).concat(t)}};var i={checkRoom:function(t,o){return console.log("checkRoom: ",o),fetch(e.get(e.visits.patientRoomToken),{method:"POST",body:JSON.stringify({room_name:o}),headers:{authorization:"Bearer ".concat(t.token),Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return t}))},createRoom:function(t,o){return fetch(e.get(e.visits.providerRoomToken),{method:"POST",body:JSON.stringify({room_name:o}),headers:{authorization:"Bearer ".concat(t.token),Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return t}))}}},1163:function(t,o,n){t.exports=n(387)}},function(t){t.O(0,[316,283,651,117,774,888,179],(function(){return o=2616,t(t.s=o);var o}));var o=t.O();_N_E=o}]);